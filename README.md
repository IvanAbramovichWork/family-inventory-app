# family-inventory-app

# Приложение для управления семейным инвентарем

Это приложение на Go предназначено для управления запасами продуктов в семье. Оно позволяет учитывать продукты, их количество и срок годности, а также отправлять уведомления, когда продукты заканчиваются или срок их годности подходит к концу. В качестве базы данных используется PostgreSQL, а для контейнеризации — Docker.

## Оглавление
- [Функционал](#функционал)
- [Необходимые компоненты](#необходимые-компоненты)
- [Настройка](#настройка)
- [Конфигурация](#конфигурация)
- [Запуск приложения](#запуск-приложения)
- [API Эндпоинты](#api-эндпоинты)

## Функционал
- Учет семейных продуктов, их количества и срока годности.
- Уведомления при низком количестве или скором истечении срока годности продуктов.
- Синхронизация инвентаря между членами семьи в реальном времени.
- Возможность назначения ролей (например, Администратор, Участник).
- Ведение истории изменений инвентаря.

## Необходимые компоненты

- Docker и Docker Compose
- Go (если приложение запускается вне контейнера)

## Настройка

1. **Клонируйте репозиторий**:

    ```bash
    git clone https://github.com/IvanAbramovichWork/family-inventory-app.git
    cd family-inventory-app
    ```

2. **Подготовьте `.env` файл**: Создайте файл `.env` в корневой директории и укажите параметры подключения к базе данных. Пример содержимого:

    ```env
    DB_USER=myuser
    DB_PASSWORD=mypassword
    DB_NAME=mydatabase
    DB_HOST=db
    DB_PORT=5432
    ```

## Конфигурация

### Структура проекта

- `app/` — исходный код приложения на Go
- `db/` — Dockerfile для базы данных и начальный SQL-скрипт `init.sql` для создания таблиц
- `docker-compose.yml` — настройки для Docker Compose, объединяющие сервисы приложения и базы данных

### Настройка базы данных

Файл `init.sql` в директории `db/` содержит SQL-запросы для создания необходимых таблиц в PostgreSQL.

## Запуск приложения

1. **Соберите и запустите контейнеры**:

    ```bash
    docker compose up --build
    ```

    Docker Compose автоматически создаст и запустит контейнеры приложения и базы данных.

2. **Проверьте статус контейнеров**:

    ```bash
    docker compose ps
    ```

    Убедитесь, что оба контейнера (`app` и `db`) находятся в статусе `Up`.

3. **Тестирование API**: Откройте Postman или используйте `curl`, чтобы проверить работу приложения. Например, для проверки эндпоинта `/ping`:

    ```bash
    curl http://localhost:8080/ping
    ```

    Если приложение работает корректно, вы получите ответ `{"message": "pong"}`.

## API Эндпоинты

| Метод | Эндпоинт                     | Описание                                   |
|-------|-------------------------------|--------------------------------------------|
| POST  | `/users/signup`               | Регистрация нового пользователя            |
| GET   | `/users/:id`                  | Получение информации о пользователе        |
| POST  | `/families`                   | Создание новой семьи                       |
| PUT   | `/families/:id`               | Обновление информации о семье              |
| POST  | `/products`                   | Добавление нового продукта                 |
| GET   | `/products`                   | Получение списка всех продуктов            |
| POST  | `/inventory`                  | Добавление продукта в инвентарь семьи      |
| PUT   | `/inventory/:id`              | Обновление количества продукта в инвентаре |
| POST  | `/transactions`               | Создание новой транзакции                  |
| GET   | `/transactions/:family_id`    | Получение истории транзакций семьи         |
| POST  | `/notifications`              | Создание уведомления                       |
| PUT   | `/notifications/:id/read`     | Пометка уведомления как прочитанного       |

## Примечание
Этот проект использует `sqlx` для работы с базой данных PostgreSQL и `Gin` для обработки HTTP-запросов. Все настройки базы данных можно изменить в файле `.env`.
